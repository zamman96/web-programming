<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="../CSS/public.css"> 
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="http://localhost/Jqpro/js/jquery-3.7.1.js"></script>
<style>
.res{
	display: flex;
}
.res div{
	box-sizing : border-box;
	flex : 25%;
}
</style>
<script>
$(function() {
	$('#member').on('click', function(){
		// /를 안쓰면 404 오류
		getMember('/Jqpro/MemberList.do')
		.then((data)=>{
			res = JSON.parse(data);
			return res;
		})
		.then((data)=>{
			let code=`<table class="table"><tr>
				<th>아이디</th>
				<th>이름</th>
				<th>이메일</th>
				<th>전화번호</th>
			</tr>`;
			$.each(res, function(){
				code += `<tr><td>${this.mem_id} </td>
					<td>${this.mem_name}</td>
					<td>${this.mem_mail}</td>
					<td>${this.mem_hp}</td></tr>`;
			})
			code+=`</table>`;
			
			$('#result1').html(code);
		})
		
	})
	
})

function getMember(url){
	return new Promise((resolve, reject) => {
		const xhr = new XMLHttpRequest();
		xhr.open("GET", url);
		xhr.onload = () => resolve(xhr.responseText);
		xhr.onerror = () => reject(new Error("오류가 발생했어요"));
		xhr.send();
	})
}
</script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
 
 <body>

	<div class="box">
		<h3></h3>
		<input type="button" value="memberList" id="member"> 
		<br> <br>
		<form action="">
		<input type="submit">
		</form>

		<div id="result1"></div>
	</div>
</body>
</html>