<?xml version="1.0" encoding="UTF-8"?>

<!-- 이 문서는 myBatis에서 처리할 SQL문을 작성하는 문서입니다 -->
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<!-- <mapper>태그의 namespace속성에 설정된 값은 Java소스에서 실행할 SQL문을 호출할 때
	 같이 사용되는 이름이다 -->
<mapper namespace="board">
<sql id="dynamicCondition">
   <where>
      <if test="!(stype == '' or sword == '')">
           ${stype} like  '%'||#{sword}||'%'
       </if>
   </where>
</sql>

<!-- 게시판 리스트 가져오기 -->
<select id="allBoard" parameterType="map" resultType="bVo">
		 select A.* from 
     (select rownum as rnum , B.* from
        ( select * from boardtab
          <include refid="dynamicCondition"/> 
               order by  num desc ) B 
<!-- <= 태그가 아니고 글자로 인식 <![CDATA[  ]]-->
    <![CDATA[
          where rownum <= #end#) A
       where A.rnum >= #start# 
     ]]>            
 </select>
 
 <select id="totalCount" parameterType="map" resultType="int">
        select count(*) cnt from boardtab
          <include refid="dynamicCondition"/> 
 </select>
</mapper>