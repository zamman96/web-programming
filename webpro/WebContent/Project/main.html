<!DOCTYPE html>
<html>
<!-- <head> -->
<link rel="stylesheet" href="mystyle.css">
<link rel="shortcut icon" href="./images/bag.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://
fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=Hahmlet:wght@100..900&family=Jua&display=swap"
	rel="stylesheet">
<meta charset="UTF-8">
<title>Web Shopping main page</title>
<style>
body * {
	font-family: "Hahmlet", serif;
	font-optical-sizing: auto;
	font-weight: < weight >;
	font-style: normal;
	font-optical-sizing: auto;
	font-weight: <weight>;
}
</style>
<script>
	function iframeLoaded() {
		// iframe으로 로드된 clothing HTML 페이지의 Document 객체를 가져옴
		var iframeDoc = document.getElementById("cartCount").contentDocument;

		// clothing HTML 페이지의 모든 버튼에 클릭 이벤트 핸들러 추가
		var cartButtons = iframeDoc.querySelectorAll(".cart");
		cartButtons.forEach(function(button) {
			button.addEventListener("click", function(event) {
				increaseCount(event.target.getAttribute('name'));
				let name = event.target.getAttribute('id');
				console.log(name);
				alert(`${name}가 장바구니에 담겼습니다.`);
			});
		});
	}

	// clothing HTML 페이지에서 버튼을 클릭했을 때 호출되는 함수
	function increaseCount(buttonName) {
		let num = parseInt(document.querySelector(`#${buttonName}`).innerText) + 1;
		document.querySelector(`#${buttonName}`).innerText = num;
	}

	function sendTable() {
		var table = document.getElementById("cartTable");
		
		var dataString = "";

		// 테이블 값을 문자열로 저장
	    for (var i = 0; i < table.rows.length; i++) {
	        for (var j = 0; j < table.rows[i].cells.length; j++) {
	            dataString += table.rows[i].cells[j].innerText + ",";
	        }
	    }

		document.getElementById("tableData").value = dataString;
		
		document.getElementById("myForm").submit();
	}
</script>
</head>
<body>
	<div id="container">

		<!-- header -->
		<header>
			<h1>
				<img id="titleImage" src="./images/shopping-bags.png"
					alt="shoppingCart.png"> <a href="main.html"> Web <span
					id="shop">Shopping</span>
				</a>
			</h1>
		</header>



		<!-- nav -->
		<nav>
			<ul id="index">
				<li>Home</li>
				<li>Shopping about</li>
				<li>News</li>
				<li>My Account</li>
				<li>Contacts</li>
			</ul>
		</nav>




		<div id="content">

			<!--aside left-->
			<aside id="left">
				<ul id="cate">
					<li><a href="computer.html" target="ifr">컴퓨터</a></li>
					<li><a href="clothing.html" target="ifr">의류</a></li>
					<li><a href="music.html" target="ifr">음악</a></li>
					<li><a href="movie.html" target="ifr">영화</a></li>
					<li><a href="sport.html" target="ifr">스포츠/레저</a></li>
					<li><a href="furniture.html" target="ifr">가구/인테리어</a></li>
					<li><a href="food.html" target="ifr">식품</a></li>
				</ul>
			</aside>
			<section>
				<article>
					<iframe id="cartCount" onload="iframeLoaded()" src="computer.html"
						title="iframe" name="ifr" scrolling="no"></iframe>
				</article>
			</section>

			<aside id="right">
				<div id="shopcart">
					<h2>Shopping Cart</h2>
					<a href="shopcart.html">쇼핑카트 보기</a>
					<form action="shopcart.jsp" method="post" id="myForm">
						<input type="hidden" id="tableData" name="tableData">
						<button onclick="sendTable()" class="button" id="cartsee">담은 쇼핑카트 보기</button>
					</form>
				</div>
				<div id="login">
					<h2>Log In</h2>
					<form action="">
						아이디<br> <input> <br> 패스워드<br> <input
							type="password"> <br> <input type="submit"
							values="로그인" class="button"> <input type="reset"
							values="초기화" class="button"> <br> <a
							href="register.html">회원가입</a> <a>비밀번호 분실</a>
					</form>
				</div>
			</aside>
		</div>

		<footer> Copyright (c)2019 Hong </footer>
	</div>
	<table id="cartTable">
		<tr>
			<!-- 			<td>컴퓨터</td> -->
			<td id="com1">0</td>
			<td id="com2">0</td>
			<td id="com3">0</td>
		</tr>
		<tr>
			<!-- 			<td>의류</td> -->
			<td id="clo1">0</td>
			<td id="clo2">0</td>
			<td id="clo3">0</td>
		</tr>
		<tr>
			<!-- 			<td>음악</td> -->
			<td id="mu1">0</td>
			<td id="mu2">0</td>
			<td id="mu3">0</td>
		</tr>
		<tr>
			<!-- 			<td>영화</td> -->
			<td id="mo1">0</td>
			<td id="mo2">0</td>
			<td id="mo3">0</td>
		</tr>
		<tr>
			<!-- 			<td>스포츠</td> -->
			<td id="sp1">0</td>
			<td id="sp2">0</td>
			<td id="sp3">0</td>
		</tr>
		<tr>
			<!-- 			<td>가구</td> -->
			<td id="fu1">0</td>
			<td id="fu2">0</td>
			<td id="fu3">0</td>
		</tr>
		<tr>
			<!-- 			<td>식품</td> -->
			<td id="f1">0</td>
			<td id="f2">0</td>
			<td id="f3">0</td>
		</tr>
	</table>
</body>
</html>